"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[665],{69590:function(e,s,n){var t=n(76747),a=n(86495),c=n(26319),r=n(71945),l=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new c.Z(e,s).match(r.Z.values.categoryRead)})),i=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new c.Z(e,s).match(r.Z.values.categoryRead)})),o=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new c.Z(e,s).match(r.Z.values.categoryRead)})),d=(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new c.Z(e,s).match(r.Z.values.categoryRead)})),u={selectPermissionToRead:l,selectPermissionToEdit:i,selectPermissionToCreate:o,selectPermissionToDestroy:(0,t.P1)([a.Z.selectCurrentTenant,a.Z.selectCurrentUser],(function(e,s){return new c.Z(e,s).match(r.Z.values.categoryRead)})),selectPermissionToImport:d};s.Z=u},21121:function(e,s,n){var t=n(74165),a=n(15861),c=n(53198),r=n(85932),l=n(33512),i=n(10499),o=n(40476),d=n(14122),u="COUPONS_DESTROY",m={DESTROY_STARTED:"".concat(u,"_DESTROY_STARTED"),DESTROY_SUCCESS:"".concat(u,"_DESTROY_SUCCESS"),DESTROY_ERROR:"".concat(u,"_DESTROY_ERROR"),DESTROY_ALL_STARTED:"".concat(u,"_DESTROY_ALL_STARTED"),DESTROY_ALL_SUCCESS:"".concat(u,"_DESTROY_ALL_SUCCESS"),DESTROY_ALL_ERROR:"".concat(u,"_DESTROY_ALL_ERROR"),doDestroy:function(e){return function(){var s=(0,a.Z)((0,t.Z)().mark((function s(n){return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n({type:m.DESTROY_STARTED}),s.next=4,r.Z.destroyAll([e]);case 4:n({type:m.DESTROY_SUCCESS}),d.Z.success((0,i.ag)("entities.vip.destroy.success")),n(c.Z.doFetchCurrentFilter()),(0,o.s1)().push("/assets"),s.next=15;break;case 10:s.prev=10,s.t0=s.catch(0),l.Z.handle(s.t0),n(c.Z.doFetchCurrentFilter()),n({type:m.DESTROY_ERROR});case 15:case"end":return s.stop()}}),s,null,[[0,10]])})));return function(e){return s.apply(this,arguments)}}()},doDestroyAll:function(e){return function(){var s=(0,a.Z)((0,t.Z)().mark((function s(n){return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n({type:m.DESTROY_ALL_STARTED}),s.next=4,r.Z.destroyAll(e);case 4:n({type:m.DESTROY_ALL_SUCCESS}),c.Z&&(n(c.Z.doClearAllSelected()),n(c.Z.doFetchCurrentFilter())),d.Z.success((0,i.ag)("entities.vip.destroyAll.success")),(0,o.s1)().push("/assets"),s.next=15;break;case 10:s.prev=10,s.t0=s.catch(0),l.Z.handle(s.t0),n(c.Z.doFetchCurrentFilter()),n({type:m.DESTROY_ALL_ERROR});case 15:case"end":return s.stop()}}),s,null,[[0,10]])})));return function(e){return s.apply(this,arguments)}}()}};s.Z=m},65987:function(e,s,n){var t={selectLoading:(0,n(76747).P1)([function(e){return e.vip.destroy}],(function(e){return Boolean(e.loading)}))};s.Z=t},80665:function(e,s,n){n.r(s),n.d(s,{default:function(){return K}});var t=n(47313),a=n(10499),c=n(1413),r=n(70885),l=n(17551),i=n(16347),o=n(45788),d=n(43270),u=n(47590),m=n(95748),h=n(69138),f=n(3463),x=n(67357),Z=n(13586),j=n(40846),p=n(47575),v=n(68031),b=n(5544),g={status:["available","locked","pending"],accountType:["exchange","trade","perpetual"]},N=n(46417),T=f.Ry().shape({user:u.Z.relationToOne((0,a.ag)("entities.transaction.fields.user")),idnumber:u.Z.decimal((0,a.ag)("entities.assets.fields.idnumber")),accountType:u.Z.enumerator((0,a.ag)("entities.assets.fields.accountType"))}),y={user:null,levellimit:null},S={user:{label:(0,a.ag)("entities.transaction.fields.user"),render:j.Z.relationToOne()},idnumer:{label:(0,a.ag)("entities.assets.fields.idnumer"),render:j.Z.decimal()},accountType:{label:(0,a.ag)("entities.assets.fields.accountType"),render:j.Z.enumerator("user.accountType")}};var C=function(e){var s=(0,o.v9)(i.Z.selectRawFilter),n=(0,o.I0)(),u=(0,t.useState)(!1),f=(0,r.Z)(u,2),j=f[0],C=f[1],R=(0,t.useState)((function(){return(0,c.Z)((0,c.Z)({},y),s)})),E=(0,r.Z)(R,1)[0],k=(0,d.cI)({resolver:(0,x.X)(T),defaultValues:E,mode:"all"});(0,t.useEffect)((function(){n(l.Z.doFetch(T.cast(E),s))}),[n]);var _=function(e){var s=k.getValues();n(l.Z.doFetch(e,s)),C(!1)};return(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(Z.Z,{onClick:function(){C(!j)},renders:S,values:s,expanded:j,onRemove:function(e){return k.setValue(e,y[e]),k.handleSubmit(_)()}}),(0,N.jsx)("div",{className:"container",children:(0,N.jsx)("div",{className:"collapse ".concat(j?"show":""),children:(0,N.jsx)(d.RV,(0,c.Z)((0,c.Z)({},k),{},{children:(0,N.jsxs)("form",{onSubmit:k.handleSubmit(_),children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(v.Z,{name:"user",label:(0,a.ag)("entities.transaction.fields.user")})}),(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(b.Z,{name:"accountType",label:(0,a.ag)("entities.assets.fields.accountType"),options:g.accountType.map((function(e){return{value:e,label:(0,a.ag)("entities.assets.enumerators.accountType.".concat(e))}}))})}),(0,N.jsx)("div",{className:"col-lg-6 col-12",children:(0,N.jsx)(p.Z,{name:"idnumber",label:(0,a.ag)("entities.assets.fields.idnumber")})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsxs)("div",{className:"col-12 filter-buttons",children:[(0,N.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:e.loading,children:[(0,N.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-search"}),(0,a.ag)("common.search")]}),(0,N.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){Object.keys(y).forEach((function(e){k.setValue(e,y[e])})),n(l.Z.doReset()),C(!1)},disabled:e.loading,children:[(0,N.jsx)(m.Z,{loading:e.loading,iconClass:"fas fa-undo"}),(0,a.ag)("common.reset")]})]})})]})}))})})]})},R=n(28303),E=n(69590),k=n(65987),_=n(99671),D=n(44587),w=n(61567),O=n(97249),A=n(1296);var L=function(e){var s=(0,t.useState)(null),n=(0,r.Z)(s,2),c=n[0],d=n[1],u=(0,t.useState)(null),m=(0,r.Z)(u,2),h=m[0],f=m[1],x=(0,o.I0)(),Z=(0,o.v9)(i.Z.selectLoading),j=(0,o.v9)(k.Z.selectLoading),p=Z||j,v=(0,o.v9)(i.Z.selectRows),b=(0,o.v9)(i.Z.selectPagination),g=(0,o.v9)(i.Z.selectSelectedKeys),T=(0,o.v9)(i.Z.selectHasRows),y=(0,o.v9)(i.Z.selectSorter),S=(0,o.v9)(i.Z.selectIsAllSelected),C=(0,o.v9)(E.Z.selectPermissionToEdit),L=(0,o.v9)(E.Z.selectPermissionToDestroy),P=function(){return d(null)},Y=function(){return f(null)},U=function(e){var s=y.field===e&&"ascend"===y.order?"descend":"ascend";x(l.Z.doChangeSort({field:e,order:s}))};return(0,N.jsxs)("div",{className:"spot-list-container",children:[(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsxs)("table",{className:"spot-list-table",children:[(0,N.jsx)("thead",{className:"table-header",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"checkbox-column",children:T&&(0,N.jsx)("div",{className:"checkbox-wrapper",children:(0,N.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:Boolean(S),onChange:function(){return x(l.Z.doToggleAllSelected())}})})}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("user")},children:[(0,a.ag)("entities.assets.fields.user"),"user"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("accountType")},children:[(0,a.ag)("entities.assets.fields.accountType"),"symbol"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("symbol")},children:[(0,a.ag)("entities.assets.fields.symbol"),"symbol"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("coinName")},children:[(0,a.ag)("entities.assets.fields.coinName"),"coinName"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("amount")},children:[(0,a.ag)("entities.assets.fields.amount"),"amount"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsxs)("th",{className:"sortable-header",onClick:function(){return U("status")},children:[(0,a.ag)("entities.assets.fields.status"),"status"===y.field&&(0,N.jsx)("span",{className:"sort-icon",children:"ascend"===y.order?"\u2191":"\u2193"})]}),(0,N.jsx)("th",{className:"actions-header",children:"Actions"})]})}),(0,N.jsxs)("tbody",{className:"table-body",children:[p&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:8,className:"loading-cell",children:(0,N.jsxs)("div",{className:"loading-container",children:[(0,N.jsx)(w.Z,{}),(0,N.jsx)("span",{className:"loading-text",children:"Loading data..."})]})})}),!p&&!T&&(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:8,className:"no-data-cell",children:(0,N.jsxs)("div",{className:"no-data-content",children:[(0,N.jsx)("i",{className:"fas fa-database no-data-icon"}),(0,N.jsx)("p",{children:(0,a.ag)("table.noData")})]})})}),!p&&v.map((function(e){return(0,N.jsxs)("tr",{className:"table-row",children:[(0,N.jsx)("td",{className:"checkbox-column",children:(0,N.jsx)("div",{className:"checkbox-wrapper",children:(0,N.jsx)("input",{type:"checkbox",className:"form-checkbox",checked:g.includes(e.id),onChange:function(){return s=e.id,x(l.Z.doToggleOneSelected(s));var s}})})}),(0,N.jsx)("td",{className:"table-cell",children:(0,N.jsx)(A.Z,{value:e.createdBy})}),(0,N.jsxs)("td",{className:"table-cell",children:["       ",e.accountType]}),(0,N.jsx)("td",{className:"table-cell",children:e.symbol}),(0,N.jsx)("td",{className:"table-cell",children:e.coinName}),(0,N.jsx)("td",{className:"table-cell numeric",children:e.amount}),(0,N.jsx)("td",{className:"table-cell",children:(0,N.jsx)("span",{className:"status-badge ".concat("active"===e.status?"success":"freezed"===e.status?"canceled":"warning"),children:e.status})}),(0,N.jsx)("td",{className:"actions-cell",children:(0,N.jsxs)("div",{className:"actions-container",children:[C&&(0,N.jsxs)(R.rU,{className:"btn-action edit",to:"/assets/".concat(e.id,"/edit"),children:[(0,N.jsx)("i",{className:"fas fa-edit"}),(0,N.jsx)("span",{children:(0,a.ag)("common.edit")})]}),L&&("active"===e.status?(0,N.jsxs)("button",{className:"btn-action freeze",type:"button",onClick:function(){return s=e.id,d(s);var s},children:[(0,N.jsx)("i",{className:"fas fa-lock"}),(0,N.jsx)("span",{children:(0,a.ag)("common.freeze")})]}):(0,N.jsxs)("button",{className:"btn-action unfreeze",type:"button",onClick:function(){return s=e.id,f(s);var s},children:[(0,N.jsx)("i",{className:"fas fa-unlock"}),(0,N.jsx)("span",{children:(0,a.ag)("common.unfreeze")})]}))]})})]},e.id)}))]})]})}),(0,N.jsx)("div",{className:"pagination-container",children:(0,N.jsx)(O.Z,{onChange:function(e){x(l.Z.doChangePagination(e))},disabled:p,pagination:b})}),c&&(0,N.jsx)(D.Z,{title:(0,a.ag)("common.freezeConfirmation"),onConfirm:function(){return e=c,P(),void x(_.Z.changeStatus(e));var e},onClose:P,okText:(0,a.ag)("common.freeze"),cancelText:(0,a.ag)("common.cancel"),children:(0,N.jsx)("p",{children:(0,a.ag)("entities.assets.freeze.confirmation")})}),h&&(0,N.jsx)(D.Z,{title:(0,a.ag)("common.unfreezeConfirmation"),onConfirm:function(){return e=h,Y(),void x(_.Z.changeStatus(e));var e},onClose:Y,okText:(0,a.ag)("common.unfreeze"),cancelText:(0,a.ag)("common.cancel"),children:(0,N.jsx)("p",{children:(0,a.ag)("entities.assets.unfreeze.confirmation")})})]})},P=n(23516),Y=n(21121),U=n(10419),F=n(28745);var z=function(e){var s=(0,t.useState)(!1),n=(0,r.Z)(s,2),c=n[0],l=n[1],d=(0,o.I0)(),u=(0,o.v9)(i.Z.selectSelectedKeys),h=(0,o.v9)(i.Z.selectLoading),f=(0,o.v9)(k.Z.selectLoading),x=((0,o.v9)(i.Z.selectExportLoading),(0,o.v9)(i.Z.selectHasRows),(0,o.v9)(P.Z.selectPermissionToRead),(0,o.v9)(E.Z.selectPermissionToDestroy)),Z=((0,o.v9)(E.Z.selectPermissionToCreate),(0,o.v9)(E.Z.selectPermissionToImport),function(){l(!0)}),j=function(){l(!1)};return(0,N.jsxs)(U.Z,{children:[function(){if(!x)return null;var e=!u.length||h,s=(0,N.jsx)("button",{disabled:e,className:"btn btn-primary",type:"button",onClick:Z,children:(0,N.jsx)(m.Z,{loading:f,iconClass:"far fa-trash-alt"})});return e?(0,N.jsxs)("span",{"data-tip":(0,a.ag)("common.mustSelectARow"),"data-tip-disable":!e,"data-for":"coupons-list-toolbar-destroy-tooltip",children:[s,(0,N.jsx)(F.Z,{id:"coupons-list-toolbar-destroy-tooltip"})]}):s}(),c&&(0,N.jsx)(D.Z,{title:(0,a.ag)("common.areYouSure"),onConfirm:function(){return j(),void d(Y.Z.doDestroyAll(u))},onClose:function(){return j()},okText:(0,a.ag)("common.yes"),cancelText:(0,a.ag)("common.no")})]})},I=n(27829),V=n(75352),B=n(22102),$=n(63849),H=n(31616);var K=function(e){return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(I.Z,{children:[(0,N.jsx)(B.Z,{fluid:!0,children:(0,N.jsxs)($.Z,{children:[(0,N.jsx)(H.Z,{xs:9,children:(0,N.jsx)(V.Z,{children:(0,a.ag)("entities.assets.list.title")})}),(0,N.jsx)(H.Z,{md:"auto",children:(0,N.jsx)(z,{})})]})}),(0,N.jsx)(C,{}),(0,N.jsx)(L,{})]})})}},44587:function(e,s,n){var t=n(47313),a=n(1168),c=n(46417);s.Z=function(e){var s=(0,t.useRef)();(0,t.useEffect)((function(){window.$(s.current).modal("show"),window.$(s.current).on("hidden.bs.modal",e.onClose)}),[]);return a.createPortal((0,c.jsx)("div",{ref:s,className:"modal",tabIndex:-1,children:(0,c.jsx)("div",{className:"modal-dialog modal-sm",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",children:e.title}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,c.jsx)("span",{children:"\xd7"})})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-light btn-sm","data-dismiss":"modal",children:e.cancelText}),(0,c.jsx)("button",{type:"button",onClick:function(){return window.$(s.current).modal("hide"),e.onConfirm()},className:"btn btn-primary btn-sm",children:e.okText})]})]})})}),document.getElementById("modal-root"))}},1296:function(e,s,n){n(47313);var t=n(28303),a=n(45788),c=n(15021),r=n(46417);s.Z=function(e){var s=(0,a.v9)(c.Z.selectPermissionToRead),n=function(){var s=e.value;return s?Array.isArray(s)?s:[s]:[]},l=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null};return n().length?(0,r.jsx)(r.Fragment,{children:n().map((function(e){return n=e,s?(0,r.jsx)("div",{children:(0,r.jsx)(t.rU,{className:"btn btn-link",to:"/user/".concat(n.id),children:l(n)})},n.id):(0,r.jsx)("div",{children:l(n)},n.id);var n}))}):null}},22102:function(e,s,n){var t=n(1413),a=n(45987),c=n(46123),r=n.n(c),l=n(47313),i=n(68524),o=n(46417),d=["bsPrefix","fluid","as","className"],u=l.forwardRef((function(e,s){var n=e.bsPrefix,c=e.fluid,l=void 0!==c&&c,u=e.as,m=void 0===u?"div":u,h=e.className,f=(0,a.Z)(e,d),x=(0,i.vE)(n,"container"),Z="string"===typeof l?"-".concat(l):"-fluid";return(0,o.jsx)(m,(0,t.Z)((0,t.Z)({ref:s},f),{},{className:r()(h,l?"".concat(x).concat(Z):x)}))}));u.displayName="Container",s.Z=u}}]);